!function(t){"use strict";t.redux=t.redux||{},t(document).ready(function(){t.redux.wbc_importer()}),t.redux.wbc_importer=function(){t(".wrap-importer.theme.not-imported, #wbc-importer-reimport").unbind("click").on("click",function(t){t.preventDefault();var r=jQuery(this),e=!1,o="Import Demo Content?";if(("wbc-importer-reimport"==t.target.id&&(e=!0,o="Re-Import Content?",jQuery(this).hasClass("rendered")||(r=jQuery(this).parents(".wrap-importer"))),!r.hasClass("imported")||0!=e)&&0!=confirm(o)){1==e&&r.removeClass("active imported").addClass("not-imported"),r.find(".spinner").css("display","inline-block"),r.removeClass("active imported"),r.find(".importer-button").hide();var i=jQuery(this).data(),n=!1;return i.action="redux_wbc_importer",i.demo_import_id=r.attr("data-demo-id"),i.nonce=r.attr("data-nonce"),i.type="import-demo-content",i.wbc_import=1==e?"re-importing":" ",r.find(".wbc_image").css("opacity","0.5"),jQuery.post(ajaxurl,i,function(t){if(r.find(".wbc_image").css("opacity","1"),r.find(".spinner").css("display","none"),t.length>0&&t.match(/Have fun!/gi)){if(0==e){r.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data");r.find(".theme-actions .wbc-importer-buttons").append('<div id="wbc-importer-reimport" class="wbc-importer-buttons button-primary import-demo-data importer-button">Re-Import</div>')}r.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),r.find(".importer-button").attr("style",""),r.addClass("imported active").removeClass("not-imported"),n=!0,s(i),location.reload(!0)}else r.find(".import-demo-data").show(),1==e&&(r.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),r.find(".importer-button").attr("style",""),r.addClass("imported active").removeClass("not-imported")),n=!0,alert("There was an error importing demo content: \n\n"+t.replace(/(<([^>]+)>)/gi,""))}),r.prepend('<div class="wbc-progress-back"><div class="wbc-progress-bar button-primary"><span class="wbc-progress-count">0%</span></div>'),setTimeout(function(){s(i)},2e3),!1}function s(t){t.action="redux_wbc_importer_progress",0==n?jQuery.ajax({url:ajaxurl,data:t,success:function(e){var o=jQuery.parseJSON(e);if(e.length>0&&"object"==typeof o){var i=Math.floor(o.imported_count/o.total_post*100);(i=i>0?i-1:i)>=98?(r.find(".wbc-progress-bar").css("width","100%"),r.find(".wbc-progress-count").text("Initialing...")):(r.find(".wbc-progress-bar").css("width",i+"%"),r.find(".wbc-progress-count").text(i+"%")),setTimeout(function(){s(t)},2e3)}}}):r.find(".wbc-progress-back").remove()}})}}(jQuery);